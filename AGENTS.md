# AGENTS.md

## このプロジェクトのエージェント利用方針

本プロジェクトでは、AIエージェントや自動化ツールを活用し、以下の方針で開発効率・品質向上を目指しています。

### 1. テストカバレッジ最大化
- すべてのソースファイルに1:1でテストファイルを用意し、AIエージェントがカバレッジレポートを解析して不足箇所を提案・実装します。
- カバレッジレポート（lcov.info）は scripts/coverage.sh, scripts/coverage.ps1, Makefile で自動生成。

### 2. コードレビュー・リファクタリング
- エージェントはコードの静的解析やリファクタ提案を行い、設計・可読性・保守性を高めます。
- 変更内容はパッチ形式で記録し、履歴を明確にします。

### 3. ドキュメント・スクリプト自動生成
- README.md, AGENTS.md, スクリプト類もエージェントが自動生成・更新します。
- ドキュメントの日本語化・最新化も自動化対象です。

### 4. クロスプラットフォーム対応
- Windows/macOS/Linux で動作するよう、エージェントがスクリプトや依存関係を自動調整します。

### 5. エージェント利用履歴の管理
- 重要な自動化・AI提案内容は AGENTS.md に記録し、将来の開発者が経緯を追えるようにします。

---

## 直近のエージェント活動履歴（例）

- 2026-01-02: cli.dart の nullガード追加、テスト修正、カバレッジ100%達成
- 2025-12-30: テスト構成を1:1に統合、カバレッジスクリプトを改善
- 2025-12-25: README.md自動生成、Makefile・スクリプトのクロスプラットフォーム対応

---

## 今後の運用指針
- 重要なAI/自動化による変更・提案は本ファイルに追記してください。
- エージェントの提案は必ずレビューし、必要に応じて人手で補完・修正してください。

---

## フォルダ構成と責務（2026年1月現在）

- `bin/` : CLIエントリポイント（bin/locale_sheet.dart）
- `lib/`
	- `locale_sheet.dart` : 公開API
	- `src/core/` : ドメインモデル・パーサ・ロジック（localization_entry.dart, parser.dart, model.dart, localization_sheet.dart など）
	- `src/cli/` : CLIアダプタ・ロガー（cli.dart, logger.dart）
	- `src/exporters/` : 各種エクスポーター（arb_exporter.dart等）
- `test/` : ユニット/統合テスト（lib/src/の構成に合わせて core/ cli/ exporters/ などサブディレクトリ化）
- `scripts/` : カバレッジ・クリーン用スクリプト（Bash/PowerShell両対応）
- `AGENTS.md` : エージェント/自動化運用方針・履歴

### 運用原則
- すべてのソースファイルに1:1でテストファイルを配置する
- ドメインロジックは core/、CLI固有処理は cli/、出力変換は exporters/ に集約
- テストもsrc/の構成に合わせてサブディレクトリ化
- 構成変更やリファクタ履歴は本ファイルに記録

### テスト実装方針
- すべてのテストコードはAAAパターン（Arrange-Act-Assert）で記述する
- 各テストケースには「テストの意図」を日本語のドキュメンテーションコメント（///）で明記する
- コメント・ドキュメントは原則として日本語で記述する

> エージェント/自動化ツールはこの構成・責務を参照し、ファイル生成・リファクタ時の指針とすること

---

## レビュー観点

- フォルダ構成・責務分離：各ディレクトリの責務が明確か、1:1テスト配置、不要ファイルの有無
- コード品質・設計：ドメインとインフラの分離、拡張性・保守性、エラーハンドリングの統一
- テスト・カバレッジ：機能・エラーケース網羅、カバレッジ可視化、CI自動実行
- 自動化・運用：スクリプトのクロスプラットフォーム対応、AGENTS.mdの履歴・方針記録、ドキュメントの最新化
- ドキュメント整備：README/AGENTS.md/スクリプトコメント等の充実、設計意図・運用ルールの明確化

---

（最終更新: 2026-01-02）
